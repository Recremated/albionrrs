import{c as N,j as e,C as H,T as _,r as l,L as P}from"./index-DpIRGi-P.js";import{H as R,t as B,S as Q,e as U,q as Z,c as A,C as E,I as G,A as k}from"./constants-D16S9D5I.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],V=N("funnel",O);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],J=N("map-pin",W);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],q=N("search",K),X=({itemCount:s})=>e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"flex items-center justify-center mb-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 p-3 rounded-full mr-4",children:e.jsx(H,{className:"h-8 w-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-purple-400 to-blue-400 bg-clip-text text-transparent",children:"Albion Market Tracker"}),e.jsx("p",{className:"text-sm text-purple-300 font-medium",children:"by Recremated#1"})]})]}),e.jsx("p",{className:"text-gray-300 text-lg mb-2",children:"Albion Online item fiyatlarını gerçek zamanlı takip edin"}),e.jsxs("div",{className:"flex items-center justify-center gap-6 text-sm text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-4 w-4"}),e.jsxs("span",{children:[s," item yüklendi"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{className:"h-4 w-4"}),e.jsx("span",{children:"Gerçek zamanlı veriler"})]})]})]}),y=s=>s.replace(/_/g," ").replace(/\b\w/g,a=>a.toUpperCase()),I=s=>!s||s===0?"N/A":new Intl.NumberFormat("tr-TR").format(s),Y=s=>s?new Date(s).toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",ee=({selectedItem:s})=>s?e.jsxs("div",{className:"mb-6 p-4 bg-purple-600/20 border border-purple-500/50 rounded-lg",children:[e.jsx("h3",{className:"text-white font-medium mb-1",children:"Seçili Item:"}),e.jsx("p",{className:"text-purple-200",children:y(s)}),e.jsx("p",{className:"text-purple-300 text-sm",children:s})]}):null,te=({filters:s,setFilters:a})=>e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[e.jsx(R,{className:"inline h-4 w-4 mr-1"}),"Tier ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsxs("select",{value:s.tier,onChange:t=>a({...s,tier:t.target.value}),className:"w-full p-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-500",children:[e.jsx("option",{value:"",children:"Seçin"}),B.map(t=>e.jsx("option",{value:t,className:"bg-slate-800",children:t},t))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[e.jsx(Q,{className:"inline h-4 w-4 mr-1"}),"Enchantment ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsxs("select",{value:s.enchantment,onChange:t=>a({...s,enchantment:t.target.value}),className:"w-full p-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-500",children:[e.jsx("option",{value:"",children:"Seçin"}),U.map(t=>e.jsxs("option",{value:t,className:"bg-slate-800",children:["+",t]},t))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[e.jsx(_,{className:"inline h-4 w-4 mr-1"}),"Quality ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsxs("select",{value:s.quality,onChange:t=>a({...s,quality:t.target.value}),className:"w-full p-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-500",children:[e.jsx("option",{value:"",children:"Seçin"}),Z.map(t=>e.jsxs("option",{value:t,className:"bg-slate-800",children:["Quality ",t]},t))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[e.jsx(J,{className:"inline h-4 w-4 mr-1"}),"Location"]}),e.jsxs("select",{value:s.location,onChange:t=>a({...s,location:t.target.value}),className:"w-full p-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-500",children:[e.jsx("option",{value:"",children:"Tümü"}),A.map(t=>e.jsx("option",{value:t,className:"bg-slate-800",children:t},t))]})]})]}),se=({canSearch:s})=>s?null:e.jsx("div",{className:"mb-6 p-4 bg-yellow-600/20 border border-yellow-500/50 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{className:"h-5 w-5 text-yellow-400 mr-2"}),e.jsxs("p",{className:"text-yellow-200",children:["Arama yapabilmek için ",e.jsx("strong",{children:"item seçimi"}),","," ",e.jsx("strong",{children:"tier"}),", ",e.jsx("strong",{children:"enchantment"})," ve"," ",e.jsx("strong",{children:"quality"})," alanları zorunludur kardeşim. Zorluk çıkarma."]})]})}),ae=({onSearch:s,onClear:a,loading:t,canSearch:r})=>e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:s,disabled:t||!r,className:"flex-1 bg-purple-600 hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed text-white font-medium py-2 px-4 rounded-lg transition-colors",children:t?"Aranıyor...":"Ara"}),e.jsxs("button",{onClick:a,className:"bg-gray-600 hover:bg-gray-700 text-white font-medium py-2 px-4 rounded-lg transition-colors",children:[e.jsx(V,{className:"inline h-4 w-4 mr-2"}),"Temizle"]})]}),re=({searchTerm:s,setSearchTerm:a,allItems:t,selectedItem:r,onItemSelect:i,filters:d,setFilters:m,canSearch:o,onSearch:c,onClear:u,loading:x})=>e.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 mb-8 border border-white/20",children:[e.jsx(G,{searchTerm:s,setSearchTerm:a,allItems:t,selectedItem:r,onItemSelect:i}),e.jsx(ee,{selectedItem:r}),e.jsx(te,{filters:d,setFilters:m}),e.jsx(se,{canSearch:o}),e.jsx(ae,{onSearch:c,onClear:u,loading:x,canSearch:o})]}),ne=({searchResults:s})=>!s||s.length===0?null:e.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white mb-4",children:["Sonuçlar (",s.length,")"]}),e.jsx("div",{className:"grid gap-4",children:s.map((a,t)=>e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:a.displayName}),e.jsx("p",{className:"text-gray-400 text-sm",children:a.itemId})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"flex gap-2 text-sm text-gray-300",children:[e.jsx("span",{className:"bg-purple-600/30 px-2 py-1 rounded",children:a.tier}),e.jsxs("span",{className:"bg-yellow-600/30 px-2 py-1 rounded",children:["+",a.enchantment]}),e.jsxs("span",{className:"bg-green-600/30 px-2 py-1 rounded",children:["Q",a.quality]})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Şehir:"}),e.jsx("p",{className:"text-white",children:a.city})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Satış Fiyatı:"}),e.jsx("p",{className:"text-green-400",children:I(a.sell_price_min)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Alış Fiyatı:"}),e.jsx("p",{className:"text-blue-400",children:I(a.buy_price_max)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Son Güncelleme:"}),e.jsx("p",{className:"text-gray-300",children:Y(a.sell_price_min_date)})]})]})]},t))})]}),le=({loading:s,searchResults:a,error:t,selectedItem:r})=>s||a.length>0||t||!r?null:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(q,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-300 mb-2",children:"Henüz arama yapılmadı"}),e.jsx("p",{className:"text-gray-400",children:"Tüm gerekli alanları doldurup arama yapabilirsiniz"})]}),ie=({error:s})=>s?e.jsx("div",{className:"bg-red-500/20 border border-red-500/50 text-red-200 p-4 rounded-lg mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{className:"h-5 w-5 mr-2"}),s]})}):null;class S{static async fetchItems(){try{const a=await fetch(k.items);if(!a.ok)throw new Error("Item listesi yüklenemedi");const r=(await a.text()).split(`
`).filter(d=>d.trim()!==""),i=[];return r.forEach(d=>{const m=d.split(":");if(m.length>=3){const o=m[1].trim(),c=m[2].trim();i.push({itemId:o,displayName:y(c)})}}),i}catch(a){throw new Error("Item listesi yüklenirken hata oluştu: "+a.message)}}static async fetchItemData(a,t){if(!a)throw new Error("Lütfen bir item seçin");if(!t.tier)throw new Error("Lütfen tier seviyesi seçin");if(!t.enchantment)throw new Error("Lütfen enchantment seviyesi seçin");if(!t.quality)throw new Error("Lütfen quality seviyesi seçin");try{const r=this.buildItemId(a,t.tier,t.enchantment),i=t.location?[t.location]:A,d=[t.quality],m=`${k.prices}/${r}?locations=${i.join(",")}&qualities=${d.join(",")}`,o=await fetch(m);if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const c=await o.json();if(!c||c.length===0)throw new Error("Bu item için veri bulunamadı. Farklı tier/enchantment/quality/location deneyin.");if(c.every(n=>n.sell_price_min===0&&n.sell_price_max===0&&n.buy_price_min===0&&n.buy_price_max===0))throw new Error("Bu item için şu anda satış veya alış fiyatı bulunmamaktadır.");let x=c;if(t.location||(x=c.filter(n=>n.sell_price_min>0||n.sell_price_max>0||n.buy_price_min>0||n.buy_price_max>0)),!x||x.length===0)throw new Error("Bu item için geçerli veri bulunamadı. Farklı tier/enchantment/quality/location deneyin.");return x.map(n=>({...n,city:n.city,itemId:r,displayName:y(a),tier:t.tier,enchantment:t.enchantment}))}catch(r){throw new Error("Veri çekilirken bir hata oluştu: "+r.message)}}static buildItemId(a,t,r){let i=`${t}_${a}`;return r!=="0"&&(i+=`@${r}`),i}}const de=()=>{const[s,a]=l.useState([]),[t,r]=l.useState([]),[i,d]=l.useState(!1),[m,o]=l.useState(!0),[c,u]=l.useState(""),[x,j]=l.useState(""),[n,f]=l.useState(""),[h,b]=l.useState({tier:"",enchantment:"",quality:"",location:""});l.useEffect(()=>{(async()=>{o(!0);try{const p=await S.fetchItems();a(p)}catch(p){u(p.message)}finally{o(!1)}})()},[]);const C=l.useCallback(async()=>{d(!0),u("");try{const g=await S.fetchItemData(n,h);r(g)}catch(g){u(g.message),r([])}finally{d(!1)}},[n,h]),T=l.useCallback(g=>{const p=g.itemId,w=p.match(/^T\d+/),v=p.match(/@(\d+)$/),M=w?w[0]:"",z=v?v[1]:"0",D=p.replace(/^T\d+_/,"").replace(/@\d+$/,"");f(D),b(F=>({...F,tier:M,enchantment:z})),j("")},[]),L=l.useCallback(()=>{b({tier:"",enchantment:"",quality:"",location:""}),j(""),f(""),r([]),u("")},[]),$=l.useMemo(()=>n&&h.tier&&h.enchantment&&h.quality,[n,h.tier,h.enchantment,h.quality]);return m?e.jsx(P,{loadingItems:m}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx(X,{itemCount:s.length}),e.jsx(re,{searchTerm:x,setSearchTerm:j,allItems:s,selectedItem:n,onItemSelect:T,filters:h,setFilters:b,canSearch:$,onSearch:C,onClear:L,loading:i}),e.jsx(ie,{error:c}),e.jsx(ne,{searchResults:t}),e.jsx(le,{loading:i,searchResults:t,error:c,selectedItem:n})]})})};export{de as default};
